<!DOCTYPE html><html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Balap Kuda</title>
<style>
body { margin:0; font-family:Arial; background:#1e1e1e; color:#fff; text-align:center }
#ui { padding:10px }
button { padding:10px 16px; margin:5px; border:none; border-radius:6px; font-weight:bold }
#start { background:#2ecc71 }
#store { background:#9b59b6; color:#fff }
#topup { background:#f1c40f }
canvas { background:#2c3e50; display:block; margin:auto; border-radius:10px }
</style>
</head>
<body>
<div id="ui">
  <div>ðŸ’Ž Diamond Ungu: <span id="diamond">0</span></div>
  <button id="start">START BALAP</button>
  <button id="store">STORE KOSTUM</button>
  <button id="topup">TOP UP ðŸ’Ž (Simulasi)</button>
  <div id="info"></div>
</div>
<canvas id="game" width="360" height="500"></canvas><script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
let diamond = 0;
let race = false;

const player = { y: 420, x: 30, speed: 0, color: 'white', name:'PLAYER' };
const horses = [
  { y:100, x:30, speed:0, color:'red', name:'MERAH' },
  { y:180, x:30, speed:0, color:'blue', name:'BIRU' },
  { y:260, x:30, speed:0, color:'green', name:'HIJAU' },
  player
];

const costumes = {
  gold:{ price:5, color:'gold' },
  fire:{ price:8, color:'orange' },
  neon:{ price:10, color:'#00ffff' }
};

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // finish line
  ctx.strokeStyle='white';
  ctx.beginPath(); ctx.moveTo(320,0); ctx.lineTo(320,500); ctx.stroke();

  horses.forEach(h=>{
    ctx.fillStyle=h.color;
    ctx.fillRect(h.x,h.y,30,20);
    ctx.fillStyle='white';
    ctx.fillText(h.name,h.x,h.y-4);
  });
}

function update(){
  if(race){
    horses.forEach(h=>{
      h.speed += Math.random()*0.3;
      h.x += h.speed;
      if(h.x>=300){
        race=false;
        document.getElementById('info').innerText='ðŸ† PEMENANG: '+h.name;
      }
    });
  }
  draw();
  requestAnimationFrame(update);
}

update();

// UI
start.onclick=()=>{
  horses.forEach(h=>{ h.x=30; h.speed=0 });
  document.getElementById('info').innerText='';
  race=true;
};

store.onclick=()=>{
  let txt='STORE KOSTUM:\n';
  for(let k in costumes){ txt+=`${k} (${costumes[k].price}ðŸ’Ž)\n`; }
  const pilih = prompt(txt+'ketik nama kostum');
  if(costumes[pilih]){
    if(diamond>=costumes[pilih].price){
      diamond-=costumes[pilih].price;
      player.color=costumes[pilih].color;
      alert('Kostum dipakai!');
      document.getElementById('diamond').innerText=diamond;
    } else alert('Diamond kurang');
  }
};

topup.onclick=()=>{
  const d = parseInt(prompt('Isi diamond (simulasi)'));
  if(!isNaN(d)){
    diamond+=d;
    document.getElementById('diamond').innerText=diamond;
  }
};
</script></body>
</html>
